
{% extends "base.html" %}
{% block content %}
<h4 class="mb-3">{{ 'Edit Content Item' if item else 'New Content Item' }}</h4>
<form method="post" class="card card-soft p-3">
  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Client *</label>
      <select name="client_id" class="form-select" required>
        <option value="">Select...</option>
        {% for c in clients %}
        <option value="{{ c.id }}"
          {% if item and item.client_id==c.id %}selected{% endif %}>{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Date *</label>
      <input type="date" name="date" class="form-control" required value="{{ item.date.isoformat() if item else '' }}">
    </div>
    <div class="col-md-4">
      <label class="form-label">Platform</label>
      <input type="text" name="platform" class="form-control" value="{{ item.platform if item else '' }}" placeholder="Instagram, FB, LinkedIn">
    </div>
    <div class="col-md-4">
      <label class="form-label">Content Type</label>
      <input type="text" name="content_type" class="form-control" value="{{ item.content_type if item else '' }}" placeholder="Post, Reel, Story">
    </div>
    <div class="col-md-8">
      <label class="form-label">Internal Title</label>
      <input type="text" name="title" class="form-control" value="{{ item.title if item else '' }}">
    </div>
    <div class="col-12">
      <label class="form-label">Caption / Notes</label>
      <textarea name="caption" class="form-control" rows="3">{{ item.caption if item else '' }}</textarea>
    </div>
    {% if item %}
    <div class="col-md-4">
      <label class="form-label">Status</label>
      <select name="status" class="form-select">
        {% set s = item.status %}
        <option value="planned" {{ 'selected' if s=='planned' else '' }}>Planned</option>
        <option value="done" {{ 'selected' if s=='done' else '' }}>Done</option>
        <option value="overdue" {{ 'selected' if s=='overdue' else '' }}>Overdue</option>
        <option value="skipped" {{ 'selected' if s=='skipped' else '' }}>Skipped</option>
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Posted URL</label>
      <input type="url" name="posted_url" class="form-control" value="{{ item.posted_url or '' }}">
    </div>
    <div class="col-md-4">
      <label class="form-label">Remarks</label>
      <input type="text" name="remarks" class="form-control" value="{{ item.remarks or '' }}">
    </div>
    {% endif %}
  </div>
  <div class="mt-3 d-flex justify-content-between">
    <a href="{{ url_for('planner') }}" class="btn btn-outline-secondary">Cancel</a>
    <button class="btn btn-primary" type="submit">Save</button>
  </div>
</form>
{% endblock %}
